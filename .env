# ===========================================
# UPGRADE PROJECT ENVIRONMENT CONFIGURATION  
# ===========================================

# Project Configuration
COMPOSE_PROJECT_NAME=upgrade
DOCKER_BUILDKIT=1

# ===========================================
# DATABASE CONFIGURATION
# ===========================================
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=upgrade_db
POSTGRES_USER=upgrade
POSTGRES_PASSWORD=upgrade123
POSTGRES_EXTERNAL_PORT=5432

# PgAdmin
PGADMIN_DEFAULT_EMAIL=admin@upgrade.com
PGADMIN_DEFAULT_PASSWORD=admin123
PGADMIN_EXTERNAL_PORT=5050

# ===========================================
# REDIS CONFIGURATION
# ===========================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=redis123
REDIS_EXTERNAL_PORT=6379

# ===========================================
# MINIO CONFIGURATION
# ===========================================
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minio123
MINIO_ENDPOINT=localhost:9000
MINIO_API_PORT=9000
MINIO_CONSOLE_PORT=9001
MINIO_BUCKET=weather-data

# ===========================================
# KAFKA CONFIGURATION
# ===========================================
KAFKA_BROKER_ID=1
KAFKA_EXTERNAL_PORT=9092
KAFKA_ZOOKEEPER_CONNECT=zookeeper:2181
KAFKA_LISTENER_SECURITY_PROTOCOL_MAP=PLAINTEXT:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT
KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://kafka:29092,PLAINTEXT_HOST://localhost:9092
KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR=1
KAFKA_AUTO_CREATE_TOPICS_ENABLE=true
KAFKA_LOG_RETENTION_HOURS=168
KAFKA_BOOTSTRAP_SERVERS=kafka:29092

# Zookeeper
ZOOKEEPER_CLIENT_PORT=2181
ZOOKEEPER_TICK_TIME=2000

# Kafka UI
KAFKA_CLUSTERS_0_NAME=local
KAFKA_CLUSTERS_0_BOOTSTRAPSERVERS=kafka:29092
KAFKA_UI_PORT=8082

# ===========================================
# AIRFLOW CONFIGURATION
# ===========================================
AIRFLOW_UID=1000
AIRFLOW__CORE__EXECUTOR=LocalExecutor
AIRFLOW__DATABASE__SQL_ALCHEMY_CONN=postgresql+psycopg2://upgrade:upgrade123@postgres/upgrade_db
AIRFLOW__CORE__DAGS_ARE_PAUSED_AT_CREATION=true
AIRFLOW__CORE__LOAD_EXAMPLES=false
AIRFLOW__WEBSERVER__EXPOSE_CONFIG=true
AIRFLOW__WEBSERVER__BASE_URL=http://localhost:8081
AIRFLOW__API__AUTH_BACKEND=airflow.api.auth.backend.basic_auth
AIRFLOW_API_URL=http://airflow-webserver:8080/api/v1
AIRFLOW_WEBSERVER_PORT=8081

# Airflow User
_AIRFLOW_WWW_USER_USERNAME=admin
_AIRFLOW_WWW_USER_PASSWORD=admin123
_AIRFLOW_DB_MIGRATE=true
_AIRFLOW_WWW_USER_CREATE=true

# ===========================================
# WEATHER SERVICES CONFIGURATION
# ===========================================
OPEN_METEO_URL=https://api.open-meteo.com/v1/forecast
OPEN_METEO_PORT=8080
COLLECTION_INTERVAL_MINUTES=30

# ===========================================
# STREAMLIT CONFIGURATION
# ===========================================
STREAMLIT_SERVER_PORT=8501
STREAMLIT_SERVER_ADDRESS=0.0.0.0
STREAMLIT_SERVER_HEADLESS=true
STREAMLIT_BROWSER_GATHER_USAGE_STATS=false
STREAMLIT_PORT=8501


# NEXTFLOW CONFIGURATION
NXF_HOME=/opt/nextflow/.nextflow
NXF_WORK=/tmp/nextflow-work
JAVA_OPTS=-Xmx4g -Xms1g

# ===========================================
# LOGGING & MONITORING
# ===========================================
LOG_LEVEL=INFO

# Health Check Configuration
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3
HEALTH_CHECK_START_PERIOD=60s